%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#4A90A4', 'primaryTextColor': '#fff', 'primaryBorderColor': '#2C5F6E', 'lineColor': '#5D6D7E', 'secondaryColor': '#82E0AA', 'tertiaryColor': '#F9E79F', 'background': '#FDFEFE'}}}%%

flowchart TD
    subgraph INICIO["ğŸš€ INÃCIO"]
        A[("ğŸ“Š Dataset<br/>sentiment_tweets3.csv<br/>10.314 tweets")]
    end

    subgraph CARREGAMENTO["1ï¸âƒ£ CARREGAMENTO E EXPLORAÃ‡ÃƒO"]
        B["ğŸ“¥ Carregar CSV do GitHub"]
        C["ğŸ” AnÃ¡lise ExploratÃ³ria<br/>â€¢ Verificar estrutura<br/>â€¢ Identificar colunas<br/>â€¢ Checar tipos de dados"]
        D{"â“ Valores<br/>Nulos?"}
        E["ğŸ§¹ Remover Nulos"]
        F["ğŸ“ˆ AnÃ¡lise de DistribuiÃ§Ã£o<br/>â€¢ Classe 0: 77.56% (8.000)<br/>â€¢ Classe 1: 22.44% (2.314)"]
    end

    subgraph PREPROCESSAMENTO["2ï¸âƒ£ PRÃ‰-PROCESSAMENTO DE TEXTO"]
        G["ğŸ”¤ Limpeza de Texto<br/>â€¢ Converter minÃºsculas<br/>â€¢ Remover URLs<br/>â€¢ Remover menÃ§Ãµes (@)<br/>â€¢ Remover hashtags (#)"]
        H["âœ‚ï¸ RemoÃ§Ã£o de RuÃ­dos<br/>â€¢ PontuaÃ§Ã£o<br/>â€¢ NÃºmeros<br/>â€¢ EspaÃ§os extras"]
        I["ğŸ“ TokenizaÃ§Ã£o<br/>NLTK word_tokenize"]
        J["ğŸ›‘ RemoÃ§Ã£o de Stopwords<br/>Palavras comuns em inglÃªs"]
        K["ğŸŒ± LematizaÃ§Ã£o<br/>WordNetLemmatizer<br/>Reduzir palavras Ã  raiz"]
        L["ğŸ”— ReconstruÃ§Ã£o<br/>Juntar tokens processados"]
    end

    subgraph VISUALIZACAO["3ï¸âƒ£ VISUALIZAÃ‡ÃƒO"]
        M["â˜ï¸ Word Cloud<br/>Tweets SEM depressÃ£o"]
        N["â˜ï¸ Word Cloud<br/>Tweets COM depressÃ£o"]
        O["ğŸ“Š AnÃ¡lise Comparativa<br/>de VocabulÃ¡rio"]
    end

    subgraph VETORIZACAO["4ï¸âƒ£ VETORIZAÃ‡ÃƒO"]
        P["ğŸ“ TF-IDF Vectorizer<br/>â€¢ max_features: 5000<br/>â€¢ ngram_range: (1,2)<br/>â€¢ min_df: 2<br/>â€¢ max_df: 0.95"]
        Q["ğŸ”¢ Matriz TF-IDF<br/>Transformar texto<br/>em vetores numÃ©ricos"]
    end

    subgraph DIVISAO["5ï¸âƒ£ DIVISÃƒO DOS DADOS"]
        R["âœ‚ï¸ Train/Test Split<br/>â€¢ Treino: 80%<br/>â€¢ Teste: 20%<br/>â€¢ Estratificado<br/>â€¢ random_state: 42"]
        S[("ğŸ“¦ X_train, X_test<br/>y_train, y_test")]
    end

    subgraph TREINAMENTO["6ï¸âƒ£ TREINAMENTO DE MODELOS"]
        T["ğŸ¤– Logistic Regression<br/>max_iter: 1000"]
        U["ğŸ§  Naive Bayes<br/>MultinomialNB"]
        V["ğŸŒ² Random Forest<br/>n_estimators: 100"]
        W["âš¡ Gradient Boosting<br/>n_estimators: 100"]
        X["ğŸ¯ SVM<br/>kernel: linear"]
    end

    subgraph AVALIACAO["7ï¸âƒ£ AVALIAÃ‡ÃƒO"]
        Y["ğŸ“Š MÃ©tricas por Modelo<br/>â€¢ Accuracy<br/>â€¢ Precision<br/>â€¢ Recall<br/>â€¢ F1-Score"]
        Z["ğŸ“‰ Matriz de ConfusÃ£o<br/>VP, VN, FP, FN"]
        AA["ğŸ“ˆ Curva ROC<br/>AUC Score"]
        AB["ğŸ“Š Curva Precision-Recall"]
    end

    subgraph COMPARACAO["8ï¸âƒ£ COMPARAÃ‡ÃƒO"]
        AC["ğŸ† Ranking de Modelos<br/>Ordenar por F1-Score"]
        AD["ğŸ“Š GrÃ¡ficos Comparativos<br/>â€¢ Barras de mÃ©tricas<br/>â€¢ Radar chart"]
        AE{"ğŸ¥‡ Melhor<br/>Modelo?"}
    end

    subgraph VALIDACAO["9ï¸âƒ£ VALIDAÃ‡ÃƒO FINAL"]
        AF["âœ… ValidaÃ§Ã£o<br/>PrediÃ§Ãµes vs Labels Reais"]
        AG["ğŸ“‹ Tabela de Assertividade<br/>% de acertos por modelo"]
        AH["ğŸ” AnÃ¡lise de Erros<br/>FP e FN por modelo"]
    end

    subgraph RESULTADO["ğŸ RESULTADO FINAL"]
        AI[("ğŸ¯ SVM<br/>Melhor Modelo<br/>Accuracy: 99.42%<br/>F1-Score: 98.63%")]
        AJ["ğŸ“ ConclusÃµes<br/>â€¢ Alta assertividade<br/>â€¢ Desbalanceamento tratado<br/>â€¢ Modelo pronto para uso"]
    end

    %% ConexÃµes
    A --> B
    B --> C
    C --> D
    D -->|Sim| E
    D -->|NÃ£o| F
    E --> F
    F --> G
    
    G --> H
    H --> I
    I --> J
    J --> K
    K --> L
    
    L --> M
    L --> N
    M --> O
    N --> O
    
    O --> P
    P --> Q
    
    Q --> R
    R --> S
    
    S --> T
    S --> U
    S --> V
    S --> W
    S --> X
    
    T --> Y
    U --> Y
    V --> Y
    W --> Y
    X --> Y
    
    Y --> Z
    Z --> AA
    AA --> AB
    
    AB --> AC
    AC --> AD
    AD --> AE
    
    AE -->|SVM| AF
    AF --> AG
    AG --> AH
    
    AH --> AI
    AI --> AJ

    %% Estilos
    classDef inicio fill:#3498DB,stroke:#2C3E50,stroke-width:2px,color:#fff
    classDef processo fill:#58D68D,stroke:#27AE60,stroke-width:2px,color:#000
    classDef decisao fill:#F7DC6F,stroke:#F39C12,stroke-width:2px,color:#000
    classDef resultado fill:#E74C3C,stroke:#C0392B,stroke-width:2px,color:#fff
    classDef modelo fill:#AF7AC5,stroke:#8E44AD,stroke-width:2px,color:#fff
    
    class A,AI inicio
    class B,C,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,Y,Z,AA,AB,AC,AD,AF,AG,AH,AJ processo
    class D,AE decisao
    class T,U,V,W,X modelo
